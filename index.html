<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Currency Converter - Live Exchange Rates & Historical Charts</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Free currency converter with live exchange rates for 150+ currencies including INR, USD, EUR, GBP. View 6-month historical charts and trends.">
<link rel="icon" href="logo.png" type="image/png">
<link rel="canonical" href="https://rupeerate.duckdns.org/">

<!-- AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7360825692914290" crossorigin="anonymous"></script>

<!-- Libraries -->
<link href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/js/tom-select.complete.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Inter', sans-serif;
  background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
  min-height: 100vh;
  padding: 20px;
  color: #1e293b;
}

.container {
  max-width: 1000px;
  margin: auto;
}

.header {
  text-align: center;
  margin-bottom: 30px;
}

.logo-title {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 15px;
  margin-bottom: 10px;
}

.logo-title img {
  width: 50px;
  height: 50px;
  object-fit: contain;
}

.header h1 {
  font-size: 2.5rem;
  color: #166534;
  font-weight: 700;
  margin: 0;
}

.header p {
  color: #15803d;
  font-size: 1rem;
  margin-top: 5px;
}

.card {
  background: white;
  padding: 35px;
  border-radius: 16px;
  box-shadow: 0 4px 20px rgba(22, 101, 52, 0.1);
  border: 1px solid #bbf7d0;
  margin-bottom: 25px;
}

.input-row {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 12px;
  margin-bottom: 15px;
}

input[type="number"],
select {
  background: #f0fdf4;
  border: 2px solid #bbf7d0;
  color: #1e293b;
  padding: 14px 16px;
  border-radius: 10px;
  font-size: 1rem;
  font-family: 'Inter', sans-serif;
  transition: all 0.2s;
  outline: none;
}

input[type="number"]:focus,
select:focus {
  border-color: #22c55e;
  background: #dcfce7;
}

.currency-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin-bottom: 15px;
}

.ts-wrapper {
  margin: 0;
}

.ts-control {
  background: #f0fdf4 !important;
  border: 2px solid #bbf7d0 !important;
  color: #1e293b !important;
  padding: 12px 14px !important;
  border-radius: 10px !important;
  font-size: 1rem !important;
  font-family: 'Inter', sans-serif !important;
  min-height: 50px !important;
}

.ts-control:focus,
.ts-wrapper.focus .ts-control {
  border-color: #22c55e !important;
  background: #dcfce7 !important;
}

.ts-dropdown {
  background: white !important;
  border: 1px solid #bbf7d0 !important;
  border-radius: 10px !important;
  box-shadow: 0 4px 12px rgba(22, 101, 52, 0.15) !important;
}

.ts-dropdown .option {
  color: #1e293b !important;
  padding: 10px 14px !important;
}

.ts-dropdown .option:hover,
.ts-dropdown .option.active {
  background: #dcfce7 !important;
}

.button-row {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 12px;
  margin-bottom: 20px;
}

button {
  background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
  color: white;
  border: none;
  padding: 14px 28px;
  border-radius: 10px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  font-family: 'Inter', sans-serif;
}

button:hover {
  background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(22, 197, 94, 0.3);
}

button:active {
  transform: translateY(0);
}

.swap-btn {
  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
  padding: 14px 20px;
  font-size: 1.2rem;
}

.swap-btn:hover {
  background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
  box-shadow: 0 6px 16px rgba(59, 130, 246, 0.3);
}

.result-card {
  background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
  border: 2px solid #22c55e;
  padding: 25px;
  border-radius: 12px;
  margin-bottom: 20px;
  display: none;
}

.result-main {
  font-size: 2rem;
  font-weight: 700;
  color: #166534;
  margin-bottom: 10px;
}

.result-words {
  font-size: 1rem;
  color: #15803d;
  font-style: italic;
  line-height: 1.6;
  margin-top: 8px;
}

.rate-info {
  display: inline-block;
  background: rgba(22, 197, 94, 0.15);
  color: #166534;
  padding: 6px 14px;
  border-radius: 6px;
  font-size: 0.9rem;
  font-weight: 600;
  margin-top: 10px;
}

.flag {
  width: 20px;
  height: 15px;
  margin-right: 6px;
  border-radius: 2px;
  object-fit: cover;
  vertical-align: middle;
}

.favorite {
  cursor: pointer;
  color: #f59e0b;
  font-size: 1rem;
  margin-left: 6px;
  transition: transform 0.2s;
  display: inline-block;
}

.favorite:hover {
  transform: scale(1.15);
}

.chart-section {
  margin-top: 25px;
}

.chart-title {
  font-size: 1.3rem;
  font-weight: 600;
  color: #166534;
  margin-bottom: 15px;
}

.chart-box {
  background: #f9fafb;
  padding: 20px;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
  height: 340px;
  position: relative;
}

.loading-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: #6b7280;
  font-size: 0.95rem;
}

.insights-box {
  background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
  border-left: 4px solid #3b82f6;
  padding: 20px;
  border-radius: 10px;
  margin-top: 20px;
  display: none;
}

.insights-box h3 {
  color: #1e40af;
  font-size: 1.1rem;
  margin-bottom: 10px;
  font-weight: 600;
}

.insights-box p {
  color: #1e3a8a;
  line-height: 1.7;
}

.ad-space {
  background: #f9fafb;
  border: 1px dashed #d1d5db;
  padding: 20px;
  border-radius: 10px;
  text-align: center;
  color: #6b7280;
  font-size: 0.9rem;
  margin: 20px 0;
}

footer {
  margin-top: 50px;
  padding: 30px 0 20px;
  border-top: 2px solid #bbf7d0;
}

.footer-links {
  display: flex;
  justify-content: center;
  gap: 30px;
  margin-bottom: 20px;
  flex-wrap: wrap;
}

.footer-links a {
  color: #166534;
  text-decoration: none;
  font-weight: 500;
  transition: color 0.2s;
}

.footer-links a:hover {
  color: #22c55e;
}

.footer-credit {
  text-align: center;
  color: #15803d;
  font-size: 0.95rem;
}

.footer-credit a {
  color: #166534;
  text-decoration: none;
  font-weight: 600;
}

.footer-credit a:hover {
  color: #22c55e;
}

@media (max-width: 768px) {
  .card {
    padding: 25px;
  }
  
  .input-row,
  .currency-row,
  .button-row {
    grid-template-columns: 1fr;
  }
  
  .chart-box {
    height: 280px;
  }
  
  .header h1 {
    font-size: 2rem;
  }
  
  .footer-links {
    flex-direction: column;
    gap: 15px;
    text-align: center;
  }
}
</style>
</head>

<body>
<div class="container">
  <div class="header">
    <div class="logo-title">
      <img src="logo.png" alt="Currency Converter Logo" onerror="this.style.display='none'">
      <h1>Currency Converter</h1>
    </div>
    <p>Live exchange rates with historical trends for 150+ currencies</p>
  </div>

  <div class="card">
    <div class="ad-space">Ad Space Top</div>

    <div class="input-row">
      <input id="amount" type="number" value="1" placeholder="Enter amount" min="0" step="any">
      <select id="unit">
        <option value="1">Normal</option>
        <option value="1000">Thousand</option>
        <option value="1000000">Million</option>
        <option value="1000000000">Billion</option>
      </select>
    </div>

    <div class="currency-row">
      <select id="from"></select>
      <select id="to"></select>
    </div>

    <div class="button-row">
      <button class="swap-btn" onclick="swapCurrencies()">‚áÑ</button>
      <button onclick="convertCurrency()">Convert Currency</button>
    </div>

    <div class="result-card" id="resultCard">
      <div class="result-main" id="resultMain"></div>
      <div class="result-words" id="resultWords"></div>
      <div id="rateInfo"></div>
    </div>

    <div class="ad-space">Ad Space Result</div>
  </div>

  <div class="card">
    <div class="chart-title">6-Month Exchange Rate History</div>
    <div class="chart-box">
      <div class="loading-text" id="chartLoading">Loading historical data...</div>
      <canvas id="rateChart"></canvas>
    </div>

    <div class="insights-box" id="insightsBox">
      <h3>üìä Currency Rate Trend Insights</h3>
      <p id="insightText"></p>
    </div>

    <div class="ad-space">Ad Space Bottom</div>
  </div>

  <footer>
    <div class="footer-links">
      <a href="about.html">About</a>
      <a href="contact.html">Contact</a>
      <a href="privacy.html">Privacy Policy</a>
    </div>
    <div class="footer-credit">
      Developed by <a href="https://github.com/chandanshetty" target="_blank">Chandan Shetty</a>
    </div>
  </footer>
</div>

<script>
const POPULAR = ["USD", "EUR", "GBP", "INR", "AED", "SAR", "QAR", "KWD", "JPY", "CNY", "AUD", "CAD"];
let exchangeRates = {};
let chartInstance = null;
let baseCurrency = "USD";

const fromSelect = document.getElementById("from");
const toSelect = document.getElementById("to");

function flagURL(code) {
  const countryCode = code.slice(0, 2).toLowerCase();
  return `https://flagcdn.com/24x18/${countryCode}.png`;
}

function getFavorites() {
  try {
    return JSON.parse(localStorage.getItem("favCurrencies") || "[]");
  } catch (e) {
    return [];
  }
}

function toggleFavorite(currency) {
  let favs = getFavorites();
  if (favs.includes(currency)) {
    favs = favs.filter(c => c !== currency);
  } else {
    favs.push(currency);
  }
  localStorage.setItem("favCurrencies", JSON.stringify(favs));
  buildCurrencySelects();
}

function createOptionHTML(code, name) {
  const isFavorite = getFavorites().includes(code);
  const star = isFavorite ? "‚≠ê" : "‚òÜ";
  return `<div>
    <img class="flag" src="${flagURL(code)}" onerror="this.style.display='none'">
    ${code} ‚Äî ${name}
    <span class="favorite" onclick="event.stopPropagation();toggleFavorite('${code}')">${star}</span>
  </div>`;
}

async function loadExchangeRates() {
  try {
    // Try Frankfurter API first (supports all currencies)
    const response = await fetch("https://api.frankfurter.app/latest");
    const data = await response.json();
    
    if (data.rates) {
      baseCurrency = data.base;
      exchangeRates = { [data.base]: 1, ...data.rates };
      console.log("Loaded rates:", Object.keys(exchangeRates).length, "currencies");
      buildCurrencySelects();
      await detectUserCurrency();
      convertCurrency();
      return;
    }
  } catch (error) {
    console.error("Frankfurter API failed:", error);
  }

  try {
    // Backup: ExchangeRate-API
    const response = await fetch("https://open.er-api.com/v6/latest/USD");
    const data = await response.json();
    
    if (data.result === "success" && data.rates) {
      baseCurrency = "USD";
      exchangeRates = data.rates;
      console.log("Loaded rates from backup:", Object.keys(exchangeRates).length, "currencies");
      buildCurrencySelects();
      await detectUserCurrency();
      convertCurrency();
      return;
    }
  } catch (error) {
    console.error("Backup API failed:", error);
  }

  showError("Unable to load exchange rates. Please refresh the page.");
}

function buildCurrencySelects() {
  if (Object.keys(exchangeRates).length === 0) return;

  fromSelect.innerHTML = "";
  toSelect.innerHTML = "";

  const displayNames = new Intl.DisplayNames(['en'], { type: 'currency' });
  const allCurrencies = Object.keys(exchangeRates).sort();
  const favCurrencies = getFavorites();
  
  // Order: Favorites, Popular, Others
  const orderedCurrencies = [
    ...favCurrencies,
    ...POPULAR.filter(c => !favCurrencies.includes(c) && exchangeRates[c]),
    ...allCurrencies.filter(c => !POPULAR.includes(c) && !favCurrencies.includes(c))
  ];

  orderedCurrencies.forEach(code => {
    if (!exchangeRates[code]) return;
    
    let currencyName;
    try {
      currencyName = displayNames.of(code) || code;
    } catch (e) {
      currencyName = code;
    }
    
    const option = `<option value="${code}">${code} ‚Äî ${currencyName}</option>`;
    fromSelect.innerHTML += option;
    toSelect.innerHTML += option;
  });

  // Destroy existing TomSelect instances
  if (fromSelect.tomselect) fromSelect.tomselect.destroy();
  if (toSelect.tomselect) toSelect.tomselect.destroy();

  // Initialize TomSelect
  new TomSelect("#from", {
    render: {
      option: (data) => createOptionHTML(data.value, data.text.split("‚Äî")[1]?.trim() || data.value)
    },
    onChange: () => {
      updateHistoricalChart();
      convertCurrency();
    }
  });

  new TomSelect("#to", {
    render: {
      option: (data) => createOptionHTML(data.value, data.text.split("‚Äî")[1]?.trim() || data.value)
    },
    onChange: () => {
      updateHistoricalChart();
      convertCurrency();
    }
  });

  // Set default currencies
  fromSelect.tomselect.setValue("USD");
  toSelect.tomselect.setValue("INR");
}

function swapCurrencies() {
  if (!fromSelect.tomselect || !toSelect.tomselect) return;

  const fromValue = fromSelect.tomselect.getValue();
  const toValue = toSelect.tomselect.getValue();
  
  fromSelect.tomselect.setValue(toValue);
  toSelect.tomselect.setValue(fromValue);
}

function getExchangeRate(from, to) {
  // Convert through base currency
  if (!exchangeRates[from] || !exchangeRates[to]) return null;
  
  // If base is EUR from Frankfurter
  if (baseCurrency === "EUR") {
    if (from === "EUR") return exchangeRates[to];
    if (to === "EUR") return 1 / exchangeRates[from];
    return exchangeRates[to] / exchangeRates[from];
  }
  
  // If base is USD
  if (baseCurrency === "USD") {
    if (from === "USD") return exchangeRates[to];
    if (to === "USD") return 1 / exchangeRates[from];
    return exchangeRates[to] / exchangeRates[from];
  }
  
  return null;
}

function numberToWords(num, currency) {
  const ones = ['', 'One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine'];
  const tens = ['', '', 'Twenty', 'Thirty', 'Forty', 'Fifty', 'Sixty', 'Seventy', 'Eighty', 'Ninety'];
  const teens = ['Ten', 'Eleven', 'Twelve', 'Thirteen', 'Fourteen', 'Fifteen', 'Sixteen', 'Seventeen', 'Eighteen', 'Nineteen'];
  
  const subunits = {
    'USD': 'Cents', 'EUR': 'Cents', 'GBP': 'Pence', 'INR': 'Paisa',
    'AED': 'Fils', 'SAR': 'Halalas', 'QAR': 'Dirhams', 'KWD': 'Fils',
    'JPY': 'Sen', 'CNY': 'Fen', 'AUD': 'Cents', 'CAD': 'Cents'
  };
  
  const currencyNames = {
    'USD': 'Dollars', 'EUR': 'Euros', 'GBP': 'Pounds', 'INR': 'Rupees',
    'AED': 'Dirhams', 'SAR': 'Riyals', 'QAR': 'Riyals', 'KWD': 'Dinars',
    'JPY': 'Yen', 'CNY': 'Yuan', 'AUD': 'Dollars', 'CAD': 'Dollars'
  };

  function convertUnder1000(n) {
    if (n === 0) return '';
    if (n < 10) return ones[n];
    if (n < 20) return teens[n - 10];
    if (n < 100) return tens[Math.floor(n / 10)] + (n % 10 ? ' ' + ones[n % 10] : '');
    return ones[Math.floor(n / 100)] + ' Hundred' + (n % 100 ? ' and ' + convertUnder1000(n % 100) : '');
  }

  function convertNumber(n, useIndianSystem) {
    if (n === 0) return 'Zero';
    
    let result = '';
    
    if (useIndianSystem) {
      let crore = Math.floor(n / 10000000);
      n %= 10000000;
      let lakh = Math.floor(n / 100000);
      n %= 100000;
      let thousand = Math.floor(n / 1000);
      n %= 1000;
      
      if (crore > 0) result += convertUnder1000(crore) + ' Crore ';
      if (lakh > 0) result += convertUnder1000(lakh) + ' Lakh ';
      if (thousand > 0) result += convertUnder1000(thousand) + ' Thousand ';
      if (n > 0) result += convertUnder1000(n);
    } else {
      let billion = Math.floor(n / 1000000000);
      n %= 1000000000;
      let million = Math.floor(n / 1000000);
      n %= 1000000;
      let thousand = Math.floor(n / 1000);
      n %= 1000;
      
      if (billion > 0) result += convertUnder1000(billion) + ' Billion ';
      if (million > 0) result += convertUnder1000(million) + ' Million ';
      if (thousand > 0) result += convertUnder1000(thousand) + ' Thousand ';
      if (n > 0) result += convertUnder1000(n);
    }
    
    return result.trim();
  }

  const parts = num.toFixed(2).split('.');
  const mainAmount = parseInt(parts[0]);
  const decimalAmount = parseInt(parts[1]);

  let words = convertNumber(mainAmount, currency === 'INR');
  words += ' ' + (currencyNames[currency] || currency);

  if (decimalAmount > 0) {
    words += ' and ' + convertUnder1000(decimalAmount) + ' ' + (subunits[currency] || 'Cents');
  }

  return words;
}

function convertCurrency() {
  const amount = parseFloat(document.getElementById("amount").value) * parseFloat(document.getElementById("unit").value);
  
  if (!fromSelect.tomselect || !toSelect.tomselect || isNaN(amount) || amount < 0) {
    return;
  }

  const fromCurrency = fromSelect.tomselect.getValue();
  const toCurrency = toSelect.tomselect.getValue();

  const rate = getExchangeRate(fromCurrency, toCurrency);
  
  if (!rate) {
    showError("Unable to convert between these currencies");
    return;
  }

  const convertedAmount = amount * rate;

  const resultCard = document.getElementById("resultCard");
  resultCard.style.display = "block";
  resultCard.style.background = "linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)";
  resultCard.style.borderColor = "#22c55e";

  document.getElementById("resultMain").style.color = "#166534";
  document.getElementById("resultMain").textContent = 
    `${amount.toLocaleString()} ${fromCurrency} = ${convertedAmount.toLocaleString(undefined, {
      minimumFractionDigits: 2,
      maximumFractionDigits: 2
    })} ${toCurrency}`;

  document.getElementById("resultWords").textContent = numberToWords(convertedAmount, toCurrency);

  document.getElementById("rateInfo").innerHTML = 
    `<span class="rate-info">üí± 1 ${fromCurrency} = ${rate.toFixed(4)} ${toCurrency}</span>`;
}

function showError(message) {
  const resultCard = document.getElementById("resultCard");
  resultCard.style.display = "block";
  resultCard.style.background = "linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)";
  resultCard.style.borderColor = "#ef4444";
  document.getElementById("resultMain").style.color = "#dc2626";
  document.getElementById("resultMain").textContent = message;
  document.getElementById("resultWords").textContent = "";
  document.getElementById("rateInfo").innerHTML = "";
}

async function detectUserCurrency() {
  try {
    const response = await fetch("https://ipapi.co/json/");
    const data = await response.json();
    
    if (data.currency && exchangeRates[data.currency] && fromSelect.tomselect) {
      fromSelect.tomselect.setValue(data.currency);
    }
  } catch (error) {
    console.log("Could not detect user currency");
  }
}

async function fetchHistoricalRates(from, to) {
  const endDate = new Date();
  const startDate = new Date();
  startDate.setMonth(startDate.getMonth() - 6);

  const formatDate = (date) => date.toISOString().split('T')[0];

  try {
    const response = await fetch(
      `https://api.frankfurter.app/${formatDate(startDate)}..${formatDate(endDate)}?from=${from}&to=${to}`
    );
    const data = await response.json();

    if (data.rates) {
      const dates = Object.keys(data.rates).sort();
      const rates = dates.map(date => data.rates[date][to]);
      return { dates, rates };
    }
  } catch (error) {
    console.error("Error loading historical rates:", error);
  }

  return null;
}

async function updateHistoricalChart() {
  if (!fromSelect.tomselect || !toSelect.tomselect) return;

  const from = fromSelect.tomselect.getValue();
  const to = toSelect.tomselect.getValue();

  document.getElementById("chartLoading").style.display = "block";

  const historicalData = await fetchHistoricalRates(from, to);

  document.getElementById("chartLoading").style.display = "none";

  if (!historicalData) return;

  const ctx = document.getElementById('rateChart').getContext('2d');

  if (chartInstance) {
    chartInstance.destroy();
  }

  chartInstance = new Chart(ctx, {
    type: 'line',
    data: {
      labels: historicalData.dates.map(date => {
        const d = new Date(date);
        return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
      }),
      datasets: [{
        label: `${from} to ${to}`,
        data: historicalData.rates,
        borderColor: '#22c55e',
        backgroundColor: 'rgba(34, 197, 94, 0.1)',
        borderWidth: 3,
        fill: true,
        tension: 0.4,
        pointRadius: 3,
        pointHoverRadius: 7,
        pointBackgroundColor: '#22c55e',
        pointBorderColor: '#fff',
        pointBorderWidth: 2,
        pointHoverBackgroundColor: '#16a34a',
        pointHoverBorderColor: '#fff',
        pointHoverBorderWidth: 3
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      interaction: {
        intersect: false,
        mode: 'index'
      },
      plugins: {
        legend: {
          labels: {
            color: '#1e293b',
            font: {
              family: 'Inter',
              size: 13,
              weight: '600'
            },
            padding: 15
          }
        },
        tooltip: {
          backgroundColor: 'rgba(255, 255, 255, 0.95)',
          titleColor: '#1e293b',
          bodyColor: '#166534',
          borderColor: '#22c55e',
          borderWidth: 2,
          padding: 12,
          cornerRadius: 8,
          titleFont: {
            family: 'Inter',
            size: 13,
            weight: '600'
          },
          bodyFont: {
            family: 'Inter',
            size: 14,
            weight: '700'
          },
          callbacks: {
            label: function(context) {
              return `Rate: ${context.parsed.y.toFixed(4)}`;
            }
          }
        }
      },
      scales: {
        x: {
          grid: {
            color: '#e5e7eb',
            drawBorder: false
          },
          ticks: {
            color: '#6b7280',
            font: {
              family: 'Inter',
              size: 11
            }
          }
        },
        y: {
          grid: {
            color: '#e5e7eb',
            drawBorder: false
          },
          ticks: {
            color: '#6b7280',
            font: {
              family: 'Inter',
              size: 11
            },
            callback: function(value) {
              return value.toFixed(4);
            }
          }
        }
      }
    }
  });

  generateInsights(historicalData.rates, from, to);
}

function generateInsights(rates, from, to) {
  const firstRate = rates[0];
  const lastRate = rates[rates.length - 1];
  const changePercent = ((lastRate - firstRate) / firstRate * 100).toFixed(2);
  const trend = changePercent > 0 ? 'strengthened' : 'weakened';
  const highRate = Math.max(...rates).toFixed(4);
  const lowRate = Math.min(...rates).toFixed(4);

  document.getElementById("insightsBox").style.display = "block";
  document.getElementById("insightText").innerHTML = `
    Over the past 6 months, <strong>${from}</strong> has ${trend} against <strong>${to}</strong> by <strong>${Math.abs(changePercent)}%</strong>. 
    The exchange rate fluctuated between a low of <strong>${lowRate}</strong> and a high of <strong>${highRate}</strong>. 
    ${Math.abs(changePercent) > 5 
      ? 'This indicates significant volatility in the currency pair during this period.' 
      : 'The rate has remained relatively stable over this period.'}
  `;
}

// Event listeners
document.getElementById("amount").addEventListener("input", convertCurrency);
document.getElementById("unit").addEventListener("change", convertCurrency);

// Initialize
loadExchangeRates();
</script>
</body>
</html>
