<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Currency Converter - Live Exchange Rates & History</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Free currency converter with live exchange rates, 6-month historical charts, and trend insights for INR, USD, EUR, GBP and 150+ currencies">
<link rel="icon" href="logo.png">
<link rel="canonical" href="https://rupeerate.duckdns.org/">

<!-- AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7360825692914290" crossorigin="anonymous"></script>

<!-- Libraries -->
<link href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/js/tom-select.complete.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Outfit:wght@300;400;600;700&display=swap');
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Outfit,sans-serif;background:linear-gradient(135deg,#0f172a 0%,#1e293b 50%,#334155 100%);min-height:100vh;padding:20px;position:relative;overflow-x:hidden}
body::before{content:'';position:fixed;top:-50%;right:-50%;width:100%;height:100%;background:radial-gradient(circle,rgba(34,211,238,.1) 0%,transparent 70%);animation:pulse 8s ease-in-out infinite;pointer-events:none}
@keyframes pulse{0%,100%{transform:scale(1) rotate(0deg);opacity:.5}50%{transform:scale(1.2) rotate(45deg);opacity:.8}}
.container{max-width:1100px;margin:auto;position:relative;z-index:1}
.header{text-align:center;margin-bottom:40px;animation:slideDown .8s cubic-bezier(.34,1.56,.64,1)}
@keyframes slideDown{from{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}
.header h1{font-family:'DM Serif Display',serif;font-size:clamp(2rem,5vw,3.5rem);color:#fff;margin-bottom:8px;letter-spacing:-.02em;text-shadow:0 0 30px rgba(34,211,238,.3)}
.header p{color:#94a3b8;font-size:1.1rem;font-weight:300}
nav{display:flex;justify-content:center;gap:20px;margin-bottom:30px;flex-wrap:wrap}
nav a{color:#94a3b8;text-decoration:none;padding:8px 16px;border-radius:8px;transition:all .3s;font-weight:500}
nav a:hover{color:#22d3ee;background:rgba(34,211,238,.1)}
.card{background:rgba(255,255,255,.03);backdrop-filter:blur(20px);padding:40px;border-radius:24px;box-shadow:0 20px 60px rgba(0,0,0,.4),inset 0 1px 0 rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.1);animation:fadeInUp .8s cubic-bezier(.34,1.56,.64,1) .2s both;margin-bottom:20px}
@keyframes fadeInUp{from{opacity:0;transform:translateY(40px)}to{opacity:1;transform:translateY(0)}}
.input-group{display:grid;grid-template-columns:2fr 1fr;gap:12px;margin-bottom:12px}
input,select{background:rgba(255,255,255,.05);border:2px solid rgba(255,255,255,.1);color:#fff;padding:16px 20px;border-radius:12px;font-size:1rem;font-family:Outfit,sans-serif;transition:all .3s;outline:none}
input:focus,select:focus{border-color:#22d3ee;background:rgba(255,255,255,.08);box-shadow:0 0 0 4px rgba(34,211,238,.1)}
.currency-selects{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px}
.ts-wrapper{margin:0}
.ts-control{background:rgba(255,255,255,.05)!important;border:2px solid rgba(255,255,255,.1)!important;color:#fff!important;padding:12px 16px!important;border-radius:12px!important;font-size:1rem!important;font-family:Outfit,sans-serif!important;transition:all .3s!important;min-height:54px!important}
.ts-control:focus,.ts-wrapper.focus .ts-control{border-color:#22d3ee!important;background:rgba(255,255,255,.08)!important;box-shadow:0 0 0 4px rgba(34,211,238,.1)!important}
.ts-dropdown{background:#1e293b!important;border:1px solid rgba(255,255,255,.1)!important;border-radius:12px!important;margin-top:4px!important;box-shadow:0 10px 40px rgba(0,0,0,.3)!important}
.ts-dropdown .option{color:#fff!important;padding:12px 16px!important;transition:background .2s!important}
.ts-dropdown .option:hover,.ts-dropdown .option.active{background:rgba(34,211,238,.1)!important}
.button-group{display:grid;grid-template-columns:1fr 2fr;gap:12px;margin-bottom:20px}
button{background:linear-gradient(135deg,#22d3ee 0%,#0ea5e9 100%);color:#0f172a;border:none;padding:16px 24px;border-radius:12px;font-size:1rem;font-weight:700;font-family:Outfit,sans-serif;cursor:pointer;transition:all .3s;box-shadow:0 4px 20px rgba(34,211,238,.3);position:relative;overflow:hidden}
button:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(34,211,238,.5)}
.swap{background:linear-gradient(135deg,#64748b 0%,#475569 100%);color:#fff;font-size:1.2rem;transition:transform .4s}
.result{background:linear-gradient(135deg,rgba(34,211,238,.1) 0%,rgba(14,165,233,.1) 100%);border:2px solid rgba(34,211,238,.3);padding:24px;border-radius:16px;margin-bottom:20px;animation:resultPop .5s cubic-bezier(.34,1.56,.64,1);display:none}
@keyframes resultPop{from{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}
.result-amount{font-size:clamp(1.5rem,4vw,2.5rem);font-weight:700;color:#22d3ee;margin-bottom:12px;font-family:'DM Serif Display',serif}
.result-words{font-size:1rem;color:#94a3b8;font-weight:400;font-style:italic;line-height:1.6}
.change{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border-radius:8px;font-size:.9rem;font-weight:600;margin-top:12px}
.change-up{background:rgba(34,197,94,.1);color:#22c55e;border:1px solid rgba(34,197,94,.2)}
.change-down{background:rgba(239,68,68,.1);color:#ef4444;border:1px solid rgba(239,68,68,.2)}
.flag{width:20px;height:15px;margin-right:8px;border-radius:2px}
.favorite{cursor:pointer;color:#fbbf24;font-size:1.1rem;margin-left:8px;transition:transform .2s}
.favorite:hover{transform:scale(1.2)}
.chart-section{margin-top:40px}
.chart-title{font-size:1.4rem;font-weight:600;color:#fff;margin-bottom:20px}
.chart-container{background:rgba(255,255,255,.02);padding:24px;border-radius:16px;border:1px solid rgba(255,255,255,.05);height:350px;position:relative}
.loading{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#64748b}
.insights{background:rgba(34,211,238,.05);border-left:4px solid #22d3ee;padding:20px;border-radius:12px;margin-top:20px}
.insights h3{color:#22d3ee;font-size:1.2rem;margin-bottom:12px}
.insights p{color:#94a3b8;line-height:1.8}
.ad-zone{background:rgba(255,255,255,.02);border:1px dashed rgba(255,255,255,.1);padding:20px;border-radius:12px;text-align:center;color:#64748b;font-size:.9rem;margin:20px 0}
@media (max-width:768px){.card{padding:24px}.input-group,.currency-selects,.button-group{grid-template-columns:1fr}.chart-container{height:280px}}
</style>
</head>

<body>
<div class="container">
  <div class="header">
    <h1>Currency Exchange</h1>
    <p>Live rates with historical trends & insights</p>
  </div>

  <nav>
    <a href="/">Home</a>
    <a href="about.html">About</a>
    <a href="contact.html">Contact</a>
    <a href="privacy.html">Privacy</a>
  </nav>

  <div class="card">
    <div class="ad-zone">Ad Space Top</div>

    <div class="input-group">
      <input id="amount" type="number" value="1" placeholder="Enter amount" min="0" step="any">
      <select id="unit">
        <option value="1">Normal</option>
        <option value="1000">Thousand</option>
        <option value="1000000">Million</option>
        <option value="1000000000">Billion</option>
      </select>
    </div>

    <div class="currency-selects">
      <select id="from"></select>
      <select id="to"></select>
    </div>

    <div class="button-group">
      <button class="swap" onclick="swap()">‚áÑ</button>
      <button onclick="convert()">Convert Currency</button>
    </div>

    <div class="result" id="resultCard">
      <div class="result-amount" id="result"></div>
      <div class="result-words" id="resultWords"></div>
      <div id="change"></div>
    </div>

    <div class="ad-zone">Ad Space Result</div>
  </div>

  <div class="card">
    <div class="chart-title">6-Month Exchange Rate History</div>
    <div class="chart-container">
      <div class="loading" id="chartLoading">Loading chart...</div>
      <canvas id="rateChart"></canvas>
    </div>

    <div class="insights" id="insights" style="display:none">
      <h3>üìä Currency Rate Trend Insights</h3>
      <p id="insightText"></p>
    </div>

    <div class="ad-zone">Ad Space Bottom</div>
  </div>
</div>

<script>
const POPULAR=["USD","EUR","GBP","INR","AED","SAR","QAR","KWD","JPY","CNY"];
let rates={},chart=null;
const fromSel=document.getElementById("from"),toSel=document.getElementById("to");

function flagURL(c){return `https://flagcdn.com/24x18/${c.slice(0,2).toLowerCase()}.png`}
function favs(){try{return JSON.parse(localStorage.getItem("favCurrencies")||"[]")}catch(e){return[]}}
function toggleFav(c){let f=favs();f.includes(c)?f=f.filter(x=>x!==c):f.push(c);localStorage.setItem("favCurrencies",JSON.stringify(f));buildSelects()}
function optionHTML(c,name){const star=favs().includes(c)?"‚≠ê":"‚òÜ";return `<div><img class="flag" src="${flagURL(c)}" onerror="this.style.display='none'">${c} ‚Äî ${name}<span class="favorite" onclick="event.stopPropagation();toggleFav('${c}')">${star}</span></div>`}

async function loadRates(){
  try{
    const r=await fetch("https://api.frankfurter.app/latest?from=USD");
    const d=await r.json();
    if(d.rates){rates={USD:1,...d.rates};buildSelects();await autoDetect();convert()}
    else throw new Error("No rates");
  }catch(e){
    try{
      const r2=await fetch("https://open.er-api.com/v6/latest/USD");
      const d2=await r2.json();
      if(d2.result==="success"&&d2.rates){rates=d2.rates;buildSelects();await autoDetect();convert()}
      else showError("Unable to load rates. Please refresh.");
    }catch(e2){showError("Connection error. Please refresh.")}
  }
}

function buildSelects(){
  if(!Object.keys(rates).length)return;
  fromSel.innerHTML=toSel.innerHTML="";
  const names=new Intl.DisplayNames(['en'],{type:'currency'}),all=Object.keys(rates).sort(),userFavs=favs();
  const ordered=[...userFavs,...POPULAR.filter(x=>!userFavs.includes(x)),...all.filter(x=>!POPULAR.includes(x)&&!userFavs.includes(x))];
  ordered.forEach(c=>{
    let name;try{name=names.of(c)||c}catch(e){name=c}
    fromSel.innerHTML+=`<option value="${c}">${c} ‚Äî ${name}</option>`;
    toSel.innerHTML+=`<option value="${c}">${c} ‚Äî ${name}</option>`;
  });
  if(fromSel.tomselect)fromSel.tomselect.destroy();
  if(toSel.tomselect)toSel.tomselect.destroy();
  new TomSelect("#from",{render:{option:d=>optionHTML(d.value,d.text.split("‚Äî")[1]?.trim()||d.value)},onChange:()=>{updateChart();convert()}});
  new TomSelect("#to",{render:{option:d=>optionHTML(d.value,d.text.split("‚Äî")[1]?.trim()||d.value)},onChange:()=>{updateChart();convert()}});
  fromSel.tomselect.setValue("USD");
  toSel.tomselect.setValue("INR");
}

function swap(){
  if(!fromSel.tomselect||!toSel.tomselect)return;
  const a=fromSel.tomselect.getValue(),b=toSel.tomselect.getValue();
  fromSel.tomselect.setValue(b);toSel.tomselect.setValue(a);
  document.querySelector(".swap").style.transform="rotate(180deg)";
  setTimeout(()=>document.querySelector(".swap").style.transform="rotate(0deg)",400);
}

function numberToWords(num,currency){
  const ones=['','One','Two','Three','Four','Five','Six','Seven','Eight','Nine'];
  const tens=['','','Twenty','Thirty','Forty','Fifty','Sixty','Seventy','Eighty','Ninety'];
  const teens=['Ten','Eleven','Twelve','Thirteen','Fourteen','Fifteen','Sixteen','Seventeen','Eighteen','Nineteen'];
  const subunits={USD:'Cents',EUR:'Cents',GBP:'Pence',INR:'Paisa',AED:'Fils',SAR:'Halalas',QAR:'Dirhams',KWD:'Fils',JPY:'Sen',CNY:'Fen'};
  const currencyNames={USD:'Dollars',EUR:'Euros',GBP:'Pounds',INR:'Rupees',AED:'Dirhams',SAR:'Riyals',QAR:'Riyals',KWD:'Dinars',JPY:'Yen',CNY:'Yuan'};
  
  function lt1000(n){
    if(n===0)return '';
    if(n<10)return ones[n];
    if(n<20)return teens[n-10];
    if(n<100)return tens[Math.floor(n/10)]+(n%10?' '+ones[n%10]:'');
    return ones[Math.floor(n/100)]+' Hundred'+(n%100?' and '+lt1000(n%100):'');
  }
  
  function convertNum(n,isIndian){
    if(n===0)return 'Zero';
    let result='';
    if(isIndian){
      let crore=Math.floor(n/10000000);n%=10000000;
      let lakh=Math.floor(n/100000);n%=100000;
      let thousand=Math.floor(n/1000);n%=1000;
      if(crore>0)result+=lt1000(crore)+' Crore ';
      if(lakh>0)result+=lt1000(lakh)+' Lakh ';
      if(thousand>0)result+=lt1000(thousand)+' Thousand ';
      if(n>0)result+=lt1000(n);
    }else{
      let billion=Math.floor(n/1000000000);n%=1000000000;
      let million=Math.floor(n/1000000);n%=1000000;
      let thousand=Math.floor(n/1000);n%=1000;
      if(billion>0)result+=lt1000(billion)+' Billion ';
      if(million>0)result+=lt1000(million)+' Million ';
      if(thousand>0)result+=lt1000(thousand)+' Thousand ';
      if(n>0)result+=lt1000(n);
    }
    return result.trim();
  }
  
  const parts=num.toFixed(2).split('.');
  const main=parseInt(parts[0]),decimal=parseInt(parts[1]);
  let words=convertNum(main,currency==='INR')+' '+(currencyNames[currency]||currency);
  if(decimal>0)words+=' and '+lt1000(decimal)+' '+(subunits[currency]||'Cents');
  return words;
}

function convert(){
  const amt=parseFloat(amount.value)*parseFloat(unit.value);
  if(!fromSel.tomselect||!toSel.tomselect||isNaN(amt)||amt<0)return;
  const f=fromSel.tomselect.getValue(),t=toSel.tomselect.getValue();
  if(!rates[f]||!rates[t])return;
  const val=(amt/rates[f])*rates[t];
  const resultCard=document.getElementById("resultCard");
  resultCard.style.display="block";
  document.getElementById("result").textContent=`${amt.toLocaleString()} ${f} = ${val.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2})} ${t}`;
  document.getElementById("resultWords").textContent=numberToWords(val,t);
  document.getElementById("change").innerHTML='<div class="change change-up">üìà Real-time rate</div>';
}

function showError(msg){
  const rc=document.getElementById("resultCard");
  rc.style.display="block";rc.style.background="linear-gradient(135deg,rgba(239,68,68,.1),rgba(220,38,38,.1))";
  rc.style.borderColor="rgba(239,68,68,.3)";
  document.getElementById("result").style.color="#ef4444";
  document.getElementById("result").textContent=msg;
}

async function autoDetect(){
  try{
    const r=await fetch("https://ipapi.co/json/");
    const j=await r.json();
    if(j.currency&&rates[j.currency]&&fromSel.tomselect)fromSel.tomselect.setValue(j.currency);
  }catch(e){}
}

async function loadHistory(from,to){
  const end=new Date(),start=new Date();start.setMonth(start.getMonth()-6);
  const fmt=d=>d.toISOString().split('T')[0];
  try{
    const r=await fetch(`https://api.frankfurter.app/${fmt(start)}..${fmt(end)}?from=${from}&to=${to}`);
    const d=await r.json();
    if(d.rates){
      const dates=Object.keys(d.rates).sort();
      return {dates,rates:dates.map(date=>d.rates[date][to])};
    }
  }catch(e){}
  return null;
}

async function updateChart(){
  if(!fromSel.tomselect||!toSel.tomselect)return;
  const from=fromSel.tomselect.getValue(),to=toSel.tomselect.getValue();
  document.getElementById("chartLoading").style.display="block";
  const data=await loadHistory(from,to);
  document.getElementById("chartLoading").style.display="none";
  if(!data)return;
  
  const ctx=document.getElementById('rateChart').getContext('2d');
  if(chart)chart.destroy();
  
  chart=new Chart(ctx,{
    type:'line',
    data:{
      labels:data.dates.map(d=>new Date(d).toLocaleDateString('en-US',{month:'short',day:'numeric'})),
      datasets:[{label:`${from} to ${to}`,data:data.rates,borderColor:'#22d3ee',backgroundColor:'rgba(34,211,238,.1)',borderWidth:3,fill:true,tension:.4,pointRadius:0,pointHoverRadius:6}]
    },
    options:{
      responsive:true,maintainAspectRatio:false,
      plugins:{
        legend:{labels:{color:'#94a3b8',font:{family:'Outfit',size:13,weight:'600'},padding:15}},
        tooltip:{backgroundColor:'rgba(15,23,42,.95)',titleColor:'#fff',bodyColor:'#22d3ee',borderColor:'rgba(34,211,238,.3)',borderWidth:1,padding:12,cornerRadius:8}
      },
      scales:{
        x:{grid:{color:'rgba(255,255,255,.05)',drawBorder:false},ticks:{color:'#64748b',font:{family:'Outfit',size:11}}},
        y:{grid:{color:'rgba(255,255,255,.05)',drawBorder:false},ticks:{color:'#64748b',font:{family:'Outfit',size:11}}}
      }
    }
  });
  
  generateInsights(data.rates,from,to);
}

function generateInsights(rates,from,to){
  const first=rates[0],last=rates[rates.length-1];
  const change=((last-first)/first*100).toFixed(2);
  const trend=change>0?'strengthened':'weakened';
  const high=Math.max(...rates).toFixed(4),low=Math.min(...rates).toFixed(4);
  
  document.getElementById("insights").style.display="block";
  document.getElementById("insightText").innerHTML=`
    Over the past 6 months, <strong>${from}</strong> has ${trend} against <strong>${to}</strong> by <strong>${Math.abs(change)}%</strong>. 
    The exchange rate ranged from a low of <strong>${low}</strong> to a high of <strong>${high}</strong>. 
    ${change>5?'This represents significant volatility in the currency pair.':'The rate has been relatively stable during this period.'}
  `;
}

document.getElementById("amount").addEventListener("input",convert);
document.getElementById("unit").addEventListener("change",convert);
loadRates();
</script>
</body>
</html>
